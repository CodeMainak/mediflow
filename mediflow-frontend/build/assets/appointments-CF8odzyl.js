import{j as e}from"./vendor-ui-U3Ba6Q2R.js";import{a as t}from"./vendor-react-BE6zuAE5.js";import{c as a,L as n,S as r,a as s,b as o,d as l,e as i,I as d,B as c,g as u,t as m,f,h as p,D as h,i as x,j as v,k as y,l as b,m as g,A as j,n as w,o as N,u as _,p as D,q as k,C,r as M,s as S,v as P,w as O,x as L}from"./dashboard-Bz_aPqVj.js";import{s as F,e as I,a as A,b as W,d as E,f as T,i as B,g as z,h as R,j as U,k as Y,l as H,m as V,n as $,o as q,p as K,q as G,r as Z,u as J,v as Q,w as X,x as ee,y as te,z as ae,A as ne,B as re,C as se,D as oe,E as le,F as ie,G as de}from"./vendor-utils-DkKPvr0p.js";import{L as ce,x as ue,y as me,F as fe,U as pe,S as he,b as xe,c as ve,C as ye,a as be,d as ge,z as je,B as we,E as Ne}from"./vendor-icons-MnWTdEGO.js";function _e({className:t,...n}){return e.jsx("textarea",{"data-slot":"textarea",className:a("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...n})}const De=({onSuccess:a,onCancel:p})=>{const[h,x]=t.useState(""),[v,y]=t.useState(""),[b,g]=t.useState(""),[j,w]=t.useState(""),[N,_]=t.useState([]),[D,k]=t.useState(!1),[C,M]=t.useState(!0),S=(()=>{const e=[],t=new Date,a=h===t.toISOString().split("T")[0],n=t.getHours(),r=t.getMinutes();for(let s=9;s<=23;s++){for(let t=0;t<60;t+=30){if(a&&(s<n||s===n&&t<=r))continue;const o=`${s.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`,l=new Date(`2000-01-01T${o}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});e.push({value:o,label:l})}if(23===s)break}return e})();t.useEffect(()=>{if(h&&v){S.some(e=>e.value===v)||y("")}},[h]),t.useEffect(()=>{(async()=>{try{M(!0);const e=await u(),t=Array.isArray(e.data)?e.data:[];_(t),t.length}catch(e){m.error("Failed to load doctors list: "+(e.response?.data?.msg||e.message))}finally{M(!1)}})()},[]);return e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!(h&&v&&b&&j))return void m.error("Please fill in all required fields");if(new Date(h+"T"+v)<=new Date)m.error("Cannot book an appointment in the past. Please select a future date and time.");else try{k(!0);const e=new Date(h+"T"+v);await f({doctorId:b,date:e.toISOString(),time:v,notes:j}),m.success("Appointment booked successfully!"),x(""),y(""),g(""),w(""),a&&a()}catch(t){m.error(t.response?.data?.msg||"Failed to book appointment")}finally{k(!1)}},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"doctor",children:"Select Doctor *"}),C?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(ce,{className:"h-5 w-5 animate-spin text-gray-500"})}):0===N.length?e.jsx("div",{className:"p-4 border border-yellow-200 bg-yellow-50 rounded-md text-sm text-yellow-800",children:"No doctors available. Please contact admin to add doctors to the system."}):e.jsxs(r,{value:b,onValueChange:g,required:!0,children:[e.jsx(s,{id:"doctor",children:e.jsx(o,{placeholder:"Choose a doctor"})}),e.jsx(l,{style:{zIndex:99999},children:N.map(t=>{const a=t._id||t.user?._id,n=t.user?.name||t.name||"Unknown Doctor",r=t.specialization;return e.jsxs(i,{value:a,children:[n,r&&` - ${r}`]},a)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Appointment Date & Time *"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"date",className:"text-xs text-muted-foreground",children:"Date"}),e.jsx(d,{id:"date",type:"date",value:h,onChange:e=>x(e.target.value),min:(new Date).toISOString().split("T")[0],max:(()=>{const e=new Date;return e.setDate(e.getDate()+30),e.toISOString().split("T")[0]})(),required:!0,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"time",className:"text-xs text-muted-foreground",children:"Time"}),e.jsxs(r,{value:v,onValueChange:y,required:!0,children:[e.jsx(s,{id:"time",className:"w-full",children:e.jsx(o,{placeholder:"Choose time"})}),e.jsx(l,{position:"popper",style:{zIndex:99999,maxHeight:"300px"},children:0===S.length?e.jsx("div",{className:"p-4 text-sm text-gray-600 text-center",children:"No available time slots for today. Please select a future date."}):S.map(t=>e.jsx(i,{value:t.value,children:t.label},t.value))})]})]})]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Appointments can be booked up to 30 days in advance.",h===(new Date).toISOString().split("T")[0]&&S.length>0&&e.jsx("span",{className:"text-amber-600 block",children:"Only future time slots are shown for today's date."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"notes",children:"Notes *"}),e.jsx(_e,{id:"notes",value:j,onChange:e=>w(e.target.value),placeholder:"e.g., General consultation, Follow-up visit, etc.",rows:4,required:!0})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[p&&e.jsx(c,{type:"button",variant:"outline",onClick:p,className:"flex-1",children:"Cancel"}),e.jsxs(c,{type:"submit",disabled:D,className:"flex-1",children:[D&&e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}),"Book Appointment"]})]})]})};var ke=function(){return ke=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ke.apply(this,arguments)};function Ce(e,t,a){for(var n,r=0,s=t.length;r<s;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}function Me(e){return"multiple"===e.mode}function Se(e){return"range"===e.mode}function Pe(e){return"single"===e.mode}"function"==typeof SuppressedError&&SuppressedError;var Oe={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};var Le=Object.freeze({__proto__:null,formatCaption:function(e,t){return K(e,"LLLL y",t)},formatDay:function(e,t){return K(e,"d",t)},formatMonthCaption:function(e,t){return K(e,"LLLL",t)},formatWeekNumber:function(e){return"".concat(e)},formatWeekdayName:function(e,t){return K(e,"cccccc",t)},formatYearCaption:function(e,t){return K(e,"yyyy",t)}}),Fe=Object.freeze({__proto__:null,labelDay:function(e,t,a){return K(e,"do MMMM (EEEE)",a)},labelMonthDropdown:function(){return"Month: "},labelNext:function(){return"Go to next month"},labelPrevious:function(){return"Go to previous month"},labelWeekNumber:function(e){return"Week n. ".concat(e)},labelWeekday:function(e,t){return K(e,"cccc",t)},labelYearDropdown:function(){return"Year: "}});var Ie=t.createContext(void 0);function Ae(t){var a,n,r,s,o,l=t.initialProps,i=(n=Oe,r=W,s=new Date,{captionLayout:"buttons",classNames:n,formatters:Le,labels:Fe,locale:r,modifiersClassNames:{},modifiers:{},numberOfMonths:1,styles:{},today:s,mode:"default"}),d=function(e){var t=e.fromYear,a=e.toYear,n=e.fromMonth,r=e.toMonth,s=e.fromDate,o=e.toDate;return n?s=F(n):t&&(s=new Date(t,0,1)),r?o=I(r):a&&(o=new Date(a,11,31)),{fromDate:s?A(s):void 0,toDate:o?A(o):void 0}}(l),c=d.fromDate,u=d.toDate,m=null!==(a=l.captionLayout)&&void 0!==a?a:i.captionLayout;"buttons"===m||c&&u||(m="buttons"),(Pe(l)||Me(l)||Se(l))&&(o=l.onSelect);var f=ke(ke(ke({},i),l),{captionLayout:m,classNames:ke(ke({},i.classNames),l.classNames),components:ke({},l.components),formatters:ke(ke({},i.formatters),l.formatters),fromDate:c,labels:ke(ke({},i.labels),l.labels),mode:l.mode||i.mode,modifiers:ke(ke({},i.modifiers),l.modifiers),modifiersClassNames:ke(ke({},i.modifiersClassNames),l.modifiersClassNames),onSelect:o,styles:ke(ke({},i.styles),l.styles),toDate:u});return e.jsx(Ie.Provider,{value:f,children:t.children})}function We(){var e=t.useContext(Ie);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function Ee(t){var a=We(),n=a.locale,r=a.classNames,s=a.styles,o=a.formatters.formatCaption;return e.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:o(t.displayMonth,{locale:n})})}function Te(t){return e.jsx("svg",ke({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Be(t){var a,n,r=t.onChange,s=t.value,o=t.children,l=t.caption,i=t.className,d=t.style,c=We(),u=null!==(n=null===(a=c.components)||void 0===a?void 0:a.IconDropdown)&&void 0!==n?n:Te;return e.jsxs("div",{className:i,style:d,children:[e.jsx("span",{className:c.classNames.vhidden,children:t["aria-label"]}),e.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:c.classNames.dropdown,style:c.styles.dropdown,value:s,onChange:r,children:o}),e.jsxs("div",{className:c.classNames.caption_label,style:c.styles.caption_label,"aria-hidden":"true",children:[l,e.jsx(u,{className:c.classNames.dropdown_icon,style:c.styles.dropdown_icon})]})]})}function ze(t){var a,n=We(),r=n.fromDate,s=n.toDate,o=n.styles,l=n.locale,i=n.formatters.formatMonthCaption,d=n.classNames,c=n.components,u=n.labels.labelMonthDropdown;if(!r)return e.jsx(e.Fragment,{});if(!s)return e.jsx(e.Fragment,{});var m=[];if(X(r,s))for(var f=F(r),p=r.getMonth();p<=s.getMonth();p++)m.push(ee(f,p));else for(f=F(new Date),p=0;p<=11;p++)m.push(ee(f,p));var h=null!==(a=null==c?void 0:c.Dropdown)&&void 0!==a?a:Be;return e.jsx(h,{name:"months","aria-label":u(),className:d.dropdown_month,style:o.dropdown_month,onChange:function(e){var a=Number(e.target.value),n=ee(F(t.displayMonth),a);t.onChange(n)},value:t.displayMonth.getMonth(),caption:i(t.displayMonth,{locale:l}),children:m.map(function(t){return e.jsx("option",{value:t.getMonth(),children:i(t,{locale:l})},t.getMonth())})})}function Re(t){var a,n=t.displayMonth,r=We(),s=r.fromDate,o=r.toDate,l=r.locale,i=r.styles,d=r.classNames,c=r.components,u=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,f=[];if(!s)return e.jsx(e.Fragment,{});if(!o)return e.jsx(e.Fragment,{});for(var p=s.getFullYear(),h=o.getFullYear(),x=p;x<=h;x++)f.push(te(ae(new Date),x));var v=null!==(a=null==c?void 0:c.Dropdown)&&void 0!==a?a:Be;return e.jsx(v,{name:"years","aria-label":m(),className:d.dropdown_year,style:i.dropdown_year,onChange:function(e){var a=te(F(n),Number(e.target.value));t.onChange(a)},value:n.getFullYear(),caption:u(n,{locale:l}),children:f.map(function(t){return e.jsx("option",{value:t.getFullYear(),children:u(t,{locale:l})},t.getFullYear())})})}function Ue(){var e=We(),a=function(e){var t=e.month,a=e.defaultMonth,n=e.today,r=t||a||n||new Date,s=e.toDate,o=e.fromDate,l=e.numberOfMonths,i=void 0===l?1:l;return s&&T(s,r)<0&&(r=E(s,-1*(i-1))),o&&T(r,o)<0&&(r=o),F(r)}(e),n=function(e,a){var n=t.useState(e),r=n[0];return[void 0===a?r:a,n[1]]}(a,e.month),r=n[0],s=n[1];return[r,function(t){var a;if(!e.disableNavigation){var n=F(t);s(n),null===(a=e.onMonthChange)||void 0===a||a.call(e,n)}}]}var Ye=t.createContext(void 0);function He(t){var a=We(),n=Ue(),r=n[0],s=n[1],o=function(e,t){for(var a=t.reverseMonths,n=t.numberOfMonths,r=F(e),s=F(E(r,n)),o=T(s,r),l=[],i=0;i<o;i++){var d=E(r,i);l.push(d)}return a&&(l=l.reverse()),l}(r,a),l=function(e,t){if(!t.disableNavigation){var a=t.toDate,n=t.pagedNavigation,r=t.numberOfMonths,s=void 0===r?1:r,o=n?s:1,l=F(e);if(!a)return E(l,o);if(!(T(a,e)<s))return E(l,o)}}(r,a),i=function(e,t){if(!t.disableNavigation){var a=t.fromDate,n=t.pagedNavigation,r=t.numberOfMonths,s=n?void 0===r?1:r:1,o=F(e);if(!a)return E(o,-s);if(!(T(o,a)<=0))return E(o,-s)}}(r,a),d=function(e){return o.some(function(t){return B(e,t)})},c={currentMonth:r,displayMonths:o,goToMonth:s,goToDate:function(e,t){d(e)||(t&&z(e,t)?s(E(e,1+-1*a.numberOfMonths)):s(e))},previousMonth:i,nextMonth:l,isDateDisplayed:d};return e.jsx(Ye.Provider,{value:c,children:t.children})}function Ve(){var e=t.useContext(Ye);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function $e(t){var a,n=We(),r=n.classNames,s=n.styles,o=n.components,l=Ve().goToMonth,i=function(e){l(E(e,t.displayIndex?-t.displayIndex:0))},d=null!==(a=null==o?void 0:o.CaptionLabel)&&void 0!==a?a:Ee,c=e.jsx(d,{id:t.id,displayMonth:t.displayMonth});return e.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[e.jsx("div",{className:r.vhidden,children:c}),e.jsx(ze,{onChange:i,displayMonth:t.displayMonth}),e.jsx(Re,{onChange:i,displayMonth:t.displayMonth})]})}function qe(t){return e.jsx("svg",ke({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Ke(t){return e.jsx("svg",ke({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Ge=t.forwardRef(function(t,a){var n=We(),r=n.classNames,s=n.styles,o=[r.button_reset,r.button];t.className&&o.push(t.className);var l=o.join(" "),i=ke(ke({},s.button_reset),s.button);return t.style&&Object.assign(i,t.style),e.jsx("button",ke({},t,{ref:a,type:"button",className:l,style:i}))});function Ze(t){var a,n,r=We(),s=r.dir,o=r.locale,l=r.classNames,i=r.styles,d=r.labels,c=d.labelPrevious,u=d.labelNext,m=r.components;if(!t.nextMonth&&!t.previousMonth)return e.jsx(e.Fragment,{});var f=c(t.previousMonth,{locale:o}),p=[l.nav_button,l.nav_button_previous].join(" "),h=u(t.nextMonth,{locale:o}),x=[l.nav_button,l.nav_button_next].join(" "),v=null!==(a=null==m?void 0:m.IconRight)&&void 0!==a?a:Ke,y=null!==(n=null==m?void 0:m.IconLeft)&&void 0!==n?n:qe;return e.jsxs("div",{className:l.nav,style:i.nav,children:[!t.hidePrevious&&e.jsx(Ge,{name:"previous-month","aria-label":f,className:p,style:i.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:"rtl"===s?e.jsx(v,{className:l.nav_icon,style:i.nav_icon}):e.jsx(y,{className:l.nav_icon,style:i.nav_icon})}),!t.hideNext&&e.jsx(Ge,{name:"next-month","aria-label":h,className:x,style:i.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:"rtl"===s?e.jsx(y,{className:l.nav_icon,style:i.nav_icon}):e.jsx(v,{className:l.nav_icon,style:i.nav_icon})})]})}function Je(t){var a=We().numberOfMonths,n=Ve(),r=n.previousMonth,s=n.nextMonth,o=n.goToMonth,l=n.displayMonths,i=l.findIndex(function(e){return B(t.displayMonth,e)}),d=0===i,c=i===l.length-1,u=a>1&&(d||!c),m=a>1&&(c||!d);return e.jsx(Ze,{displayMonth:t.displayMonth,hideNext:u,hidePrevious:m,nextMonth:s,previousMonth:r,onPreviousClick:function(){r&&o(r)},onNextClick:function(){s&&o(s)}})}function Qe(t){var a,n,r=We(),s=r.classNames,o=r.disableNavigation,l=r.styles,i=r.captionLayout,d=r.components,c=null!==(a=null==d?void 0:d.CaptionLabel)&&void 0!==a?a:Ee;return n=o?e.jsx(c,{id:t.id,displayMonth:t.displayMonth}):"dropdown"===i?e.jsx($e,{displayMonth:t.displayMonth,id:t.id}):"dropdown-buttons"===i?e.jsxs(e.Fragment,{children:[e.jsx($e,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),e.jsx(Je,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(Je,{displayMonth:t.displayMonth,id:t.id})]}),e.jsx("div",{className:s.caption,style:l.caption,children:n})}function Xe(t){var a=We(),n=a.footer,r=a.styles,s=a.classNames.tfoot;return n?e.jsx("tfoot",{className:s,style:r.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:n})})}):e.jsx(e.Fragment,{})}function et(){var t=We(),a=t.classNames,n=t.styles,r=t.showWeekNumber,s=t.locale,o=t.weekStartsOn,l=t.ISOWeek,i=t.formatters.formatWeekdayName,d=t.labels.labelWeekday,c=function(e,t,a){for(var n=a?se(new Date):oe(new Date,{locale:e,weekStartsOn:t}),r=[],s=0;s<7;s++){var o=U(n,s);r.push(o)}return r}(s,o,l);return e.jsxs("tr",{style:n.head_row,className:a.head_row,children:[r&&e.jsx("td",{style:n.head_cell,className:a.head_cell}),c.map(function(t,r){return e.jsx("th",{scope:"col",className:a.head_cell,style:n.head_cell,"aria-label":d(t,{locale:s}),children:i(t,{locale:s})},r)})]})}function tt(){var t,a=We(),n=a.classNames,r=a.styles,s=a.components,o=null!==(t=null==s?void 0:s.HeadRow)&&void 0!==t?t:et;return e.jsx("thead",{style:r.head,className:n.head,children:e.jsx(o,{})})}function at(t){var a=We(),n=a.locale,r=a.formatters.formatDay;return e.jsx(e.Fragment,{children:r(t.date,{locale:n})})}var nt=t.createContext(void 0);function rt(t){if(!Me(t.initialProps)){var a={selected:void 0,modifiers:{disabled:[]}};return e.jsx(nt.Provider,{value:a,children:t.children})}return e.jsx(st,{initialProps:t.initialProps,children:t.children})}function st(t){var a=t.initialProps,n=t.children,r=a.selected,s=a.min,o=a.max,l={disabled:[]};r&&l.disabled.push(function(e){var t=o&&r.length>o-1,a=r.some(function(t){return R(t,e)});return Boolean(t&&!a)});var i={selected:r,onDayClick:function(e,t,n){var l,i;if((null===(l=a.onDayClick)||void 0===l||l.call(a,e,t,n),!Boolean(t.selected&&s&&(null==r?void 0:r.length)===s))&&!Boolean(!t.selected&&o&&(null==r?void 0:r.length)===o)){var d=r?Ce([],r):[];if(t.selected){var c=d.findIndex(function(t){return R(e,t)});d.splice(c,1)}else d.push(e);null===(i=a.onSelect)||void 0===i||i.call(a,d,e,t,n)}},modifiers:l};return e.jsx(nt.Provider,{value:i,children:n})}function ot(){var e=t.useContext(nt);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}var lt,it=t.createContext(void 0);function dt(t){if(!Se(t.initialProps)){var a={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(it.Provider,{value:a,children:t.children})}return e.jsx(ct,{initialProps:t.initialProps,children:t.children})}function ct(t){var a=t.initialProps,n=t.children,r=a.selected,s=r||{},o=s.from,l=s.to,i=a.min,d=a.max,c={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(c.range_start=[o],l?(c.range_end=[l],R(o,l)||(c.range_middle=[{after:o,before:l}])):c.range_end=[o]):l&&(c.range_start=[l],c.range_end=[l]),i&&(o&&!l&&c.disabled.push({after:Y(o,i-1),before:U(o,i-1)}),o&&l&&c.disabled.push({after:o,before:U(o,i-1)}),!o&&l&&c.disabled.push({after:Y(l,i-1),before:U(l,i-1)})),d){if(o&&!l&&(c.disabled.push({before:U(o,1-d)}),c.disabled.push({after:U(o,d-1)})),o&&l){var u=d-(H(l,o)+1);c.disabled.push({before:Y(o,u)}),c.disabled.push({after:U(l,u)})}!o&&l&&(c.disabled.push({before:U(l,1-d)}),c.disabled.push({after:U(l,d-1)}))}return e.jsx(it.Provider,{value:{selected:r,onDayClick:function(e,t,n){var s,o;null===(s=a.onDayClick)||void 0===s||s.call(a,e,t,n);var l=function(e,t){var a=t||{},n=a.from,r=a.to;if(n&&r){if(R(r,e)&&R(n,e))return;if(R(r,e))return{from:r,to:void 0};if(R(n,e))return;return G(n,e)?{from:e,to:r}:{from:n,to:e}}return r?G(e,r)?{from:r,to:e}:{from:e,to:r}:n?z(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}(e,r);null===(o=a.onSelect)||void 0===o||o.call(a,l,e,t,n)},modifiers:c},children:n})}function ut(){var e=t.useContext(it);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function mt(e){return Array.isArray(e)?Ce([],e):void 0!==e?[e]:[]}!function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"}(lt||(lt={}));var ft=lt.Selected,pt=lt.Disabled,ht=lt.Hidden,xt=lt.Today,vt=lt.RangeEnd,yt=lt.RangeMiddle,bt=lt.RangeStart,gt=lt.Outside;var jt=t.createContext(void 0);function wt(t){var a=We(),n=function(e,t,a){var n,r=((n={})[ft]=mt(e.selected),n[pt]=mt(e.disabled),n[ht]=mt(e.hidden),n[xt]=[e.today],n[vt]=[],n[yt]=[],n[bt]=[],n[gt]=[],n);return e.fromDate&&r[pt].push({before:e.fromDate}),e.toDate&&r[pt].push({after:e.toDate}),Me(e)?r[pt]=r[pt].concat(t.modifiers[pt]):Se(e)&&(r[pt]=r[pt].concat(a.modifiers[pt]),r[bt]=a.modifiers[bt],r[yt]=a.modifiers[yt],r[vt]=a.modifiers[vt]),r}(a,ot(),ut()),r=function(e){var t={};return Object.entries(e).forEach(function(e){var a=e[0],n=e[1];t[a]=mt(n)}),t}(a.modifiers),s=ke(ke({},n),r);return e.jsx(jt.Provider,{value:s,children:t.children})}function Nt(){var e=t.useContext(jt);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function _t(e,t){return t.some(function(t){if("boolean"==typeof t)return t;if(de(t))return R(e,t);var a,n,r,s,o;if(function(e){return Array.isArray(e)&&e.every(de)}(t))return t.includes(e);if(function(e){return Boolean(e&&"object"==typeof e&&"from"in e)}(t))return a=e,s=(n=t).from,o=n.to,s&&o?(H(o,s)<0&&(s=(r=[o,s])[0],o=r[1]),H(a,s)>=0&&H(o,a)>=0):o?R(o,a):!!s&&R(s,a);if(function(e){return Boolean(e&&"object"==typeof e&&"dayOfWeek"in e)}(t))return t.dayOfWeek.includes(e.getDay());if(function(e){return Boolean(e&&"object"==typeof e&&"before"in e&&"after"in e)}(t)){var l=H(t.before,e)>0,i=H(t.after,e)<0;return G(t.before,t.after)?i&&l:l||i}return function(e){return Boolean(e&&"object"==typeof e&&"after"in e)}(t)?H(e,t.after)>0:function(e){return Boolean(e&&"object"==typeof e&&"before"in e)}(t)?H(t.before,e)>0:"function"==typeof t&&t(e)})}function Dt(e,t,a){var n=Object.keys(t).reduce(function(a,n){var r=t[n];return _t(e,r)&&a.push(n),a},[]),r={};return n.forEach(function(e){return r[e]=!0}),a&&!B(e,a)&&(r.outside=!0),r}function kt(e,t){var a=t.moveBy,n=t.direction,r=t.context,s=t.modifiers,o=t.retry,l=void 0===o?{count:0,lastFocused:e}:o,i=r.weekStartsOn,d=r.fromDate,c=r.toDate,u=r.locale,m={day:U,week:$,month:E,year:Z,startOfWeek:function(e){return r.ISOWeek?se(e):oe(e,{locale:u,weekStartsOn:i})},endOfWeek:function(e){return r.ISOWeek?ne(e):re(e,{locale:u,weekStartsOn:i})}}[a](e,"after"===n?1:-1);"before"===n&&d?m=J([d,m]):"after"===n&&c&&(m=Q([c,m]));var f=!0;if(s){var p=Dt(m,s);f=!p.disabled&&!p.hidden}return f?m:l.count>365?l.lastFocused:kt(m,{moveBy:a,direction:n,context:r,modifiers:s,retry:ke(ke({},l),{count:l.count+1})})}var Ct=t.createContext(void 0);function Mt(a){var n=Ve(),r=Nt(),s=t.useState(),o=s[0],l=s[1],i=t.useState(),d=i[0],c=i[1],u=function(e,t){for(var a,n,r=F(e[0]),s=I(e[e.length-1]),o=r;o<=s;){var l=Dt(o,t);if(l.disabled||l.hidden)o=U(o,1);else{if(l.selected)return o;l.today&&!n&&(n=o),a||(a=o),o=U(o,1)}}return n||a}(n.displayMonths,r),m=(null!=o?o:d&&n.isDateDisplayed(d))?d:u,f=function(e){l(e)},p=We(),h=function(e,t){if(o){var a=kt(o,{moveBy:e,direction:t,context:p,modifiers:r});R(o,a)||(n.goToDate(a,o),f(a))}},x={focusedDay:o,focusTarget:m,blur:function(){c(o),l(void 0)},focus:f,focusDayAfter:function(){return h("day","after")},focusDayBefore:function(){return h("day","before")},focusWeekAfter:function(){return h("week","after")},focusWeekBefore:function(){return h("week","before")},focusMonthBefore:function(){return h("month","before")},focusMonthAfter:function(){return h("month","after")},focusYearBefore:function(){return h("year","before")},focusYearAfter:function(){return h("year","after")},focusStartOfWeek:function(){return h("startOfWeek","before")},focusEndOfWeek:function(){return h("endOfWeek","after")}};return e.jsx(Ct.Provider,{value:x,children:a.children})}function St(){var e=t.useContext(Ct);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}var Pt=t.createContext(void 0);function Ot(t){if(!Pe(t.initialProps)){var a={selected:void 0};return e.jsx(Pt.Provider,{value:a,children:t.children})}return e.jsx(Lt,{initialProps:t.initialProps,children:t.children})}function Lt(t){var a=t.initialProps,n=t.children,r={selected:a.selected,onDayClick:function(e,t,n){var r,s,o;null===(r=a.onDayClick)||void 0===r||r.call(a,e,t,n),!t.selected||a.required?null===(o=a.onSelect)||void 0===o||o.call(a,e,e,t,n):null===(s=a.onSelect)||void 0===s||s.call(a,void 0,e,t,n)}};return e.jsx(Pt.Provider,{value:r,children:n})}function Ft(){var e=t.useContext(Pt);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function It(e,t){var a=[e.classNames.day];return Object.keys(t).forEach(function(t){var n=e.modifiersClassNames[t];if(n)a.push(n);else if(function(e){return Object.values(lt).includes(e)}(t)){var r=e.classNames["day_".concat(t)];r&&a.push(r)}}),a}function At(a,n,r){var s,o,l,i=We(),d=St(),c=function(e,t){return Dt(e,Nt(),t)}(a,n),u=function(e,t){var a=We(),n=Ft(),r=ot(),s=ut(),o=St(),l=o.focusDayAfter,i=o.focusDayBefore,d=o.focusWeekAfter,c=o.focusWeekBefore,u=o.blur,m=o.focus,f=o.focusMonthBefore,p=o.focusMonthAfter,h=o.focusYearBefore,x=o.focusYearAfter,v=o.focusStartOfWeek,y=o.focusEndOfWeek,b={onClick:function(o){var l,i,d,c;Pe(a)?null===(l=n.onDayClick)||void 0===l||l.call(n,e,t,o):Me(a)?null===(i=r.onDayClick)||void 0===i||i.call(r,e,t,o):Se(a)?null===(d=s.onDayClick)||void 0===d||d.call(s,e,t,o):null===(c=a.onDayClick)||void 0===c||c.call(a,e,t,o)},onFocus:function(n){var r;m(e),null===(r=a.onDayFocus)||void 0===r||r.call(a,e,t,n)},onBlur:function(n){var r;u(),null===(r=a.onDayBlur)||void 0===r||r.call(a,e,t,n)},onKeyDown:function(n){var r;switch(n.key){case"ArrowLeft":n.preventDefault(),n.stopPropagation(),"rtl"===a.dir?l():i();break;case"ArrowRight":n.preventDefault(),n.stopPropagation(),"rtl"===a.dir?i():l();break;case"ArrowDown":n.preventDefault(),n.stopPropagation(),d();break;case"ArrowUp":n.preventDefault(),n.stopPropagation(),c();break;case"PageUp":n.preventDefault(),n.stopPropagation(),n.shiftKey?h():f();break;case"PageDown":n.preventDefault(),n.stopPropagation(),n.shiftKey?x():p();break;case"Home":n.preventDefault(),n.stopPropagation(),v();break;case"End":n.preventDefault(),n.stopPropagation(),y()}null===(r=a.onDayKeyDown)||void 0===r||r.call(a,e,t,n)},onKeyUp:function(n){var r;null===(r=a.onDayKeyUp)||void 0===r||r.call(a,e,t,n)},onMouseEnter:function(n){var r;null===(r=a.onDayMouseEnter)||void 0===r||r.call(a,e,t,n)},onMouseLeave:function(n){var r;null===(r=a.onDayMouseLeave)||void 0===r||r.call(a,e,t,n)},onPointerEnter:function(n){var r;null===(r=a.onDayPointerEnter)||void 0===r||r.call(a,e,t,n)},onPointerLeave:function(n){var r;null===(r=a.onDayPointerLeave)||void 0===r||r.call(a,e,t,n)},onTouchCancel:function(n){var r;null===(r=a.onDayTouchCancel)||void 0===r||r.call(a,e,t,n)},onTouchEnd:function(n){var r;null===(r=a.onDayTouchEnd)||void 0===r||r.call(a,e,t,n)},onTouchMove:function(n){var r;null===(r=a.onDayTouchMove)||void 0===r||r.call(a,e,t,n)},onTouchStart:function(n){var r;null===(r=a.onDayTouchStart)||void 0===r||r.call(a,e,t,n)}};return b}(a,c),m=function(){var e=We(),t=Ft(),a=ot(),n=ut();return Pe(e)?t.selected:Me(e)?a.selected:Se(e)?n.selected:void 0}(),f=Boolean(i.onDayClick||"default"!==i.mode);t.useEffect(function(){var e;c.outside||d.focusedDay&&f&&R(d.focusedDay,a)&&(null===(e=r.current)||void 0===e||e.focus())},[d.focusedDay,a,r,f,c.outside]);var p=It(i,c).join(" "),h=function(e,t){var a=ke({},e.styles.day);return Object.keys(t).forEach(function(t){var n;a=ke(ke({},a),null===(n=e.modifiersStyles)||void 0===n?void 0:n[t])}),a}(i,c),x=Boolean(c.outside&&!i.showOutsideDays||c.hidden),v=null!==(l=null===(o=i.components)||void 0===o?void 0:o.DayContent)&&void 0!==l?l:at,y={style:h,className:p,children:e.jsx(v,{date:a,displayMonth:n,activeModifiers:c}),role:"gridcell"},b=d.focusTarget&&R(d.focusTarget,a)&&!c.outside,g=d.focusedDay&&R(d.focusedDay,a),j=ke(ke(ke({},y),((s={disabled:c.disabled,role:"gridcell"})["aria-selected"]=c.selected,s.tabIndex=g||b?0:-1,s)),u);return{isButton:f,isHidden:x,activeModifiers:c,selectedDays:m,buttonProps:j,divProps:y}}function Wt(a){var n=t.useRef(null),r=At(a.date,a.displayMonth,n);return r.isHidden?e.jsx("div",{role:"gridcell"}):r.isButton?e.jsx(Ge,ke({name:"day",ref:n},r.buttonProps)):e.jsx("div",ke({},r.divProps))}function Et(t){var a=t.number,n=t.dates,r=We(),s=r.onWeekNumberClick,o=r.styles,l=r.classNames,i=r.locale,d=r.labels.labelWeekNumber,c=(0,r.formatters.formatWeekNumber)(Number(a),{locale:i});if(!s)return e.jsx("span",{className:l.weeknumber,style:o.weeknumber,children:c});var u=d(Number(a),{locale:i});return e.jsx(Ge,{name:"week-number","aria-label":u,className:l.weeknumber,style:o.weeknumber,onClick:function(e){s(a,n,e)},children:c})}function Tt(t){var a,n,r,s=We(),o=s.styles,l=s.classNames,i=s.showWeekNumber,d=s.components,c=null!==(a=null==d?void 0:d.Day)&&void 0!==a?a:Wt,u=null!==(n=null==d?void 0:d.WeekNumber)&&void 0!==n?n:Et;return i&&(r=e.jsx("td",{className:l.cell,style:o.cell,children:e.jsx(u,{number:t.weekNumber,dates:t.dates})})),e.jsxs("tr",{className:l.row,style:o.row,children:[r,t.dates.map(function(a){return e.jsx("td",{className:l.cell,style:o.cell,role:"presentation",children:e.jsx(c,{displayMonth:t.displayMonth,date:a})},q(a))})]})}function Bt(e,t,a){for(var n=(null==a?void 0:a.ISOWeek)?ne(t):re(t,a),r=(null==a?void 0:a.ISOWeek)?se(e):oe(e,a),s=H(n,r),o=[],l=0;l<=s;l++)o.push(U(r,l));return o.reduce(function(e,t){var n=(null==a?void 0:a.ISOWeek)?le(t):ie(t,a),r=e.find(function(e){return e.weekNumber===n});return r?(r.dates.push(t),e):(e.push({weekNumber:n,dates:[t]}),e)},[])}function zt(t){var a,n,r,s=We(),o=s.locale,l=s.classNames,i=s.styles,d=s.hideHead,c=s.fixedWeeks,u=s.components,m=s.weekStartsOn,f=s.firstWeekContainsDate,p=s.ISOWeek,h=function(e,t){var a=Bt(F(e),I(e),t);if(null==t?void 0:t.useFixedWeeks){var n=V(e,t);if(n<6){var r=a[a.length-1],s=r.dates[r.dates.length-1],o=$(s,6-n),l=Bt($(s,1),o,t);a.push.apply(a,l)}}return a}(t.displayMonth,{useFixedWeeks:Boolean(c),ISOWeek:p,locale:o,weekStartsOn:m,firstWeekContainsDate:f}),x=null!==(a=null==u?void 0:u.Head)&&void 0!==a?a:tt,v=null!==(n=null==u?void 0:u.Row)&&void 0!==n?n:Tt,y=null!==(r=null==u?void 0:u.Footer)&&void 0!==r?r:Xe;return e.jsxs("table",{id:t.id,className:l.table,style:i.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!d&&e.jsx(x,{}),e.jsx("tbody",{className:l.tbody,style:i.tbody,children:h.map(function(a){return e.jsx(v,{displayMonth:t.displayMonth,dates:a.dates,weekNumber:a.weekNumber},a.weekNumber)})}),e.jsx(y,{displayMonth:t.displayMonth})]})}var Rt="undefined"!=typeof window&&window.document&&window.document.createElement?t.useLayoutEffect:t.useEffect,Ut=!1,Yt=0;function Ht(){return"react-day-picker-".concat(++Yt)}function Vt(a){var n,r,s=We(),o=s.dir,l=s.classNames,i=s.styles,d=s.components,c=Ve().displayMonths,u=function(e){var a,n=null!=e?e:Ut?Ht():null,r=t.useState(n),s=r[0],o=r[1];return Rt(function(){null===s&&o(Ht())},[]),t.useEffect(function(){!1===Ut&&(Ut=!0)},[]),null!==(a=null!=e?e:s)&&void 0!==a?a:void 0}(s.id?"".concat(s.id,"-").concat(a.displayIndex):void 0),m=s.id?"".concat(s.id,"-grid-").concat(a.displayIndex):void 0,f=[l.month],p=i.month,h=0===a.displayIndex,x=a.displayIndex===c.length-1,v=!h&&!x;"rtl"===o&&(x=(n=[h,x])[0],h=n[1]),h&&(f.push(l.caption_start),p=ke(ke({},p),i.caption_start)),x&&(f.push(l.caption_end),p=ke(ke({},p),i.caption_end)),v&&(f.push(l.caption_between),p=ke(ke({},p),i.caption_between));var y=null!==(r=null==d?void 0:d.Caption)&&void 0!==r?r:Qe;return e.jsxs("div",{className:f.join(" "),style:p,children:[e.jsx(y,{id:u,displayMonth:a.displayMonth,displayIndex:a.displayIndex}),e.jsx(zt,{id:m,"aria-labelledby":u,displayMonth:a.displayMonth})]},a.displayIndex)}function $t(t){var a=We(),n=a.classNames,r=a.styles;return e.jsx("div",{className:n.months,style:r.months,children:t.children})}function qt(a){var n,r,s=a.initialProps,o=We(),l=St(),i=Ve(),d=t.useState(!1),c=d[0],u=d[1];t.useEffect(function(){o.initialFocus&&l.focusTarget&&(c||(l.focus(l.focusTarget),u(!0)))},[o.initialFocus,c,l.focus,l.focusTarget,l]);var m=[o.classNames.root,o.className];o.numberOfMonths>1&&m.push(o.classNames.multiple_months),o.showWeekNumber&&m.push(o.classNames.with_weeknumber);var f=ke(ke({},o.styles.root),o.style),p=Object.keys(s).filter(function(e){return e.startsWith("data-")}).reduce(function(e,t){var a;return ke(ke({},e),((a={})[t]=s[t],a))},{}),h=null!==(r=null===(n=s.components)||void 0===n?void 0:n.Months)&&void 0!==r?r:$t;return e.jsx("div",ke({className:m.join(" "),style:f,dir:o.dir,id:o.id,nonce:s.nonce,title:s.title,lang:s.lang},p,{children:e.jsx(h,{children:i.displayMonths.map(function(t,a){return e.jsx(Vt,{displayIndex:a,displayMonth:t},a)})})}))}function Kt(t){var a=t.children,n=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(t,["children"]);return e.jsx(Ae,{initialProps:n,children:e.jsx(He,{children:e.jsx(Ot,{initialProps:n,children:e.jsx(rt,{initialProps:n,children:e.jsx(dt,{initialProps:n,children:e.jsx(wt,{children:e.jsx(Mt,{children:a})})})})})})})}function Gt(t){return e.jsx(Kt,ke({},t,{children:e.jsx(qt,{initialProps:t})}))}function Zt({className:t,classNames:n,showOutsideDays:r=!0,...s}){return e.jsx(Gt,{showOutsideDays:r,className:a("p-3",t),classNames:{months:"flex flex-col sm:flex-row gap-2",month:"flex flex-col gap-4",caption:"flex justify-center pt-1 relative items-center w-full",caption_label:"text-sm font-medium",nav:"flex items-center gap-1",nav_button:a(p({variant:"outline"}),"size-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-x-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:a("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===s.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:a(p({variant:"ghost"}),"size-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground",day_range_end:"day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...n},components:{IconLeft:({className:t,...n})=>e.jsx(me,{className:a("size-4",t),...n}),IconRight:({className:t,...n})=>e.jsx(ue,{className:a("size-4",t),...n})},...s})}const Jt=({appointment:a,open:r,onClose:s,onUpdate:o,userRole:l})=>{const[i,d]=t.useState(!1),[u,f]=t.useState("");if(!a)return null;const p=a.patientId,D=a.doctorId,k="Doctor"===l,C=async e=>{try{d(!0),await _(a._id,e),m.success(`Appointment ${e} successfully`),f(""),o(),s()}catch(t){m.error(t.response?.data?.msg||"Failed to update appointment")}finally{d(!1)}};return e.jsx(h,{open:r,onOpenChange:s,children:e.jsxs(x,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(v,{children:[e.jsxs(y,{className:"flex items-center text-xl",children:[e.jsx(fe,{className:"mr-2 h-6 w-6 text-blue-600"}),"Appointment Details"]}),e.jsx(b,{children:"View and manage appointment information"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold text-gray-700",children:"Status"}),e.jsx(g,{className:`${(e=>{switch(e){case"confirmed":case"approved":return"bg-green-100 text-green-800 border border-green-300";case"pending":return"bg-amber-100 text-amber-800 border border-amber-300";case"cancelled":case"rejected":return"bg-red-100 text-red-800 border border-red-300";case"completed":return"bg-blue-100 text-blue-800 border border-blue-300";default:return"bg-gray-100 text-gray-800 border border-gray-300"}})(a.status)} px-4 py-1.5 text-sm font-semibold`,children:a.status.toUpperCase()})]}),e.jsxs("div",{className:"space-y-2 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("h3",{className:"font-semibold text-blue-900 flex items-center",children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),"Patient Information"]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-2",children:[e.jsx(j,{className:"h-12 w-12 border-2 border-blue-300",children:e.jsx(w,{className:"bg-blue-100 text-blue-700 font-semibold",children:p?.name?p.name.split(" ").map(e=>e[0]).join(""):"?"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:p?.name||"Unknown Patient"}),e.jsx("p",{className:"text-sm text-gray-600",children:p?.email||"No email"}),e.jsx("p",{className:"text-sm text-gray-600",children:p?.phone||"No phone"})]})]})]}),!k&&e.jsxs("div",{className:"space-y-2 p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("h3",{className:"font-semibold text-green-900 flex items-center",children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Doctor Information"]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-2",children:[e.jsx(j,{className:"h-12 w-12 border-2 border-green-300",children:e.jsx(w,{className:"bg-green-100 text-green-700 font-semibold",children:D?.name?D.name.split(" ").map(e=>e[0]).join(""):"D"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:["Dr. ",D?.name||"Unknown Doctor"]}),e.jsx("p",{className:"text-sm text-gray-600",children:D?.specialization||"General Practice"}),e.jsx("p",{className:"text-sm text-gray-600",children:D?.email||"No email"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{className:"text-gray-700 flex items-center",children:[e.jsx(xe,{className:"mr-2 h-4 w-4 text-gray-500"}),"Date"]}),e.jsx("p",{className:"font-semibold text-gray-900",children:new Date(a.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{className:"text-gray-700 flex items-center",children:[e.jsx(ve,{className:"mr-2 h-4 w-4 text-gray-500"}),"Time"]}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[a.time||new Date(a.date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})," ","(",a.duration||30," min)"]})]})]}),a.type&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"text-gray-700",children:"Type"}),e.jsx("p",{className:"font-semibold text-gray-900 capitalize",children:a.type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"text-gray-700",children:a.reason?"Reason for Visit":"Notes"}),e.jsx("p",{className:"text-gray-900 p-3 bg-gray-50 rounded border border-gray-200",children:a.reason||a.notes||"No details provided"})]}),k&&"completed"!==a.status&&"cancelled"!==a.status&&e.jsxs("div",{className:"space-y-2 p-4 bg-amber-50 rounded-lg border border-amber-200",children:[e.jsxs(n,{htmlFor:"action-notes",className:"text-amber-900 font-semibold flex items-center",children:[e.jsx(ye,{className:"mr-2 h-4 w-4"}),"Add Notes (Optional)"]}),e.jsx(_e,{id:"action-notes",value:u,onChange:e=>f(e.target.value),placeholder:"Add any notes about this appointment...",rows:3,className:"bg-white"})]})]}),k&&e.jsxs(N,{className:"flex-col sm:flex-row gap-2",children:["pending"===a.status&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{onClick:()=>C("approved"),disabled:i,className:"bg-green-600 hover:bg-green-700 text-white flex-1",children:[i?e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(be,{className:"mr-2 h-4 w-4"}),"Approve Appointment"]}),e.jsxs(c,{onClick:()=>C("rejected"),disabled:i,variant:"outline",className:"border-red-500 text-red-600 hover:bg-red-50 flex-1",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Reject"]})]}),("approved"===a.status||"confirmed"===a.status)&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{onClick:()=>C("completed"),disabled:i,className:"bg-blue-600 hover:bg-blue-700 text-white flex-1",children:[i?e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(be,{className:"mr-2 h-4 w-4"}),"Mark as Completed"]}),e.jsxs(c,{onClick:()=>C("cancelled"),disabled:i,variant:"outline",className:"border-red-500 text-red-600 hover:bg-red-50 flex-1",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Cancel"]})]}),("completed"===a.status||"cancelled"===a.status||"rejected"===a.status)&&e.jsx(c,{onClick:s,variant:"outline",className:"flex-1",children:"Close"})]}),!k&&e.jsx(N,{children:e.jsx(c,{onClick:s,variant:"outline",children:"Close"})})]})})},Qt=Object.freeze(Object.defineProperty({__proto__:null,AppointmentManager:()=>{const{user:a}=D(),[n,d]=t.useState(new Date),[u,f]=t.useState("day"),[p,N]=t.useState("all"),[F,I]=t.useState([]),[A,W]=t.useState(!0),[E,T]=t.useState(null),[B,z]=t.useState(!1),[R,U]=t.useState(!1),[Y,H]=t.useState(null),[V,$]=t.useState(!1);t.useEffect(()=>{a&&(async()=>{try{W(!0),T(null);const e=await k();I(e.data||[])}catch(e){T(e.response?.data?.msg||"Failed to load appointments"),m.error("Failed to load appointments")}finally{W(!1)}})()},[a]);const q=(()=>{let e=[...F];if("all"!==p&&(e=e.filter(e=>e.status===p)),"day"===u){const t=n.toLocaleDateString();e=e.filter(e=>new Date(e.date).toLocaleDateString()===t)}return e.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())})(),K=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800 border border-green-300 font-semibold";case"pending":return"bg-amber-100 text-amber-800 border border-amber-300 font-semibold";case"cancelled":return"bg-red-100 text-red-700 border border-red-300 font-semibold";case"completed":return"bg-blue-100 text-blue-800 border border-blue-300 font-semibold";default:return"bg-gray-100 text-gray-700 border border-gray-300"}},G=e=>{switch(e){case"emergency":return"border-l-4 border-red-500 bg-red-50 hover:shadow-lg";case"follow-up":return"border-l-4 border-blue-500 bg-blue-50 hover:shadow-lg";case"consultation":return"border-l-4 border-green-500 bg-green-50 hover:shadow-lg";default:return"border-l-4 border-gray-300 bg-gray-50 hover:shadow-lg"}},Z=async(e,t)=>{try{await _(e,t),I(a=>a.map(a=>a._id===e?{...a,status:t}:a)),m.success(`Appointment ${"approved"===t?"confirmed":t}`)}catch(a){m.error(a.response?.data?.msg||"Failed to update appointment")}};return e.jsxs("div",{className:"space-y-8 p-4 md:p-6 bg-gradient-to-b from-gray-50 to-white min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between space-y-3 md:space-y-0 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(je,{className:"mr-3 h-8 w-8 text-red-600 animate-pulse"}),"patient"===a?.role?"My Appointments":"Appointment Management"]}),e.jsx("p",{className:"text-md text-gray-600 mt-1",children:"patient"===a?.role?"ðŸ“… Keep track of your upcoming and past appointments with doctors.":"âš•ï¸ Organize, track, and manage patient appointments effectively."})]}),("Patient"===a?.role||"Receptionist"===a?.role||"Admin"===a?.role)&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{onClick:()=>{z(!0)},variant:"outline",className:"bg-blue-600 text-gray-300 hover:bg-blue-700 shadow-lg transition-all z-50 relative",children:[e.jsx(we,{className:"mr-2 h-5 w-5"}),"Book New Appointment"]}),e.jsx(h,{open:B,onOpenChange:z,children:e.jsxs(x,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(v,{children:[e.jsx(y,{children:"ðŸ©º Book a New Appointment"}),e.jsx(b,{children:"Fill out the form to schedule your appointment"})]}),e.jsx(De,{onSuccess:async()=>{z(!1);const e=await k();I(e.data||[])},onCancel:()=>z(!1)})]})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(r,{value:u,onValueChange:e=>f(e),children:[e.jsx(s,{className:"w-[110px] border-blue-200 text-blue-600 font-medium",children:e.jsx(o,{placeholder:"View Mode"})}),e.jsxs(l,{children:[e.jsx(i,{value:"day",children:"ðŸ“† Day View"}),e.jsx(i,{value:"week",children:"ðŸ“… Week View"}),e.jsx(i,{value:"month",children:"ðŸ—“ï¸ Month View"})]})]}),e.jsxs(r,{value:p,onValueChange:N,children:[e.jsxs(s,{className:"w-[160px]",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx(o,{placeholder:"Filter Status"})]}),e.jsxs(l,{children:[e.jsx(i,{value:"all",children:"All Statuses"}),e.jsx(i,{value:"pending",children:"â³ Pending"}),e.jsx(i,{value:"confirmed",children:"âœ… Confirmed"}),e.jsx(i,{value:"cancelled",children:"âŒ Cancelled"}),e.jsx(i,{value:"completed",children:"â˜‘ï¸ Completed"})]})]})]}),e.jsxs("div",{className:"text-sm font-semibold text-gray-700 p-2 border rounded-lg bg-blue-50",children:[e.jsx(xe,{className:"h-4 w-4 inline mr-2 text-blue-500"}),q.length," Appointment(s) ","day"===u?"Today":"Found"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(C,{className:"shadow-lg border-blue-100",children:[e.jsx(M,{className:"border-b bg-blue-50",children:e.jsxs(S,{className:"flex items-center text-blue-800 font-bold mt-4 mb-4",children:[e.jsx(xe,{className:"mr-2 h-5 w-5 text-blue-600"}),"Pick a Date"]})}),e.jsx(P,{className:"pt-4 flex justify-center",children:e.jsx(Zt,{mode:"single",selected:n,onSelect:e=>e&&d(e),className:"rounded-md border-none w-full",initialFocus:!0})})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(C,{className:"shadow-lg border-gray-200",children:[e.jsxs(M,{className:"bg-gray-50 border-b",children:[e.jsxs(S,{className:"flex items-center text-xl font-bold text-gray-800",children:[e.jsx(ve,{className:"mr-2 h-6 w-6 text-blue-500 mt-4"}),"day"===u?`Schedule for ${n.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}`:"Appointments Overview"]}),e.jsxs(O,{className:"text-gray-600",children:["Showing ",q.length," appointments."]})]}),e.jsx(P,{children:A?e.jsxs("div",{className:"flex justify-center items-center py-16",children:[e.jsx(ce,{className:"h-12 w-12 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading appointments..."})]}):e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[q.map(t=>{const n=t.patientId,r=t.doctorId,s="Patient"===a?.role?r:n,o="Patient"===a?.role;return e.jsx("div",{className:`p-4 rounded-xl transition-all duration-200 ${G(t.type||"consultation")} shadow-sm`,children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 w-full md:w-3/5 mb-3 md:mb-0",children:[e.jsxs("div",{className:"text-center p-2 bg-white rounded-lg shadow w-20",children:[e.jsx("div",{className:"font-bold text-lg text-blue-700",children:t.time?t.time.substring(0,5):new Date(t.date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.duration||30," min"]})]}),e.jsx(j,{className:"h-12 w-12 border-2 border-blue-300",children:e.jsx(w,{className:"bg-blue-100 text-blue-700 font-semibold",children:s?.name?s.name.split(" ").map(e=>e[0]).join(""):"?"})}),e.jsxs("div",{className:"truncate",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:s?.name||"Unknown"}),e.jsx("p",{className:"text-sm text-gray-600",children:t.reason||t.notes||"No details"})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2 w-full md:w-2/5",children:[e.jsx(g,{className:`${K(t.status)} px-3 py-1 rounded-full`,children:t.status.toUpperCase()}),e.jsxs("div",{className:"flex space-x-2 flex-wrap justify-end",children:["Doctor"===a?.role&&"pending"===t.status&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{size:"sm",className:"bg-green-500 hover:bg-green-600 text-white",onClick:()=>Z(t._id,"approved"),children:[e.jsx(be,{className:"h-4 w-4 mr-1"}),"Confirm"]}),e.jsxs(c,{size:"sm",variant:"outline",className:"border-red-500 text-red-600 hover:bg-red-50",onClick:()=>Z(t._id,"rejected"),children:[e.jsx(ge,{className:"h-4 w-4 mr-1"}),"Cancel"]})]}),o&&"confirmed"===t.status&&e.jsx(c,{size:"sm",variant:"outline",className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"Reschedule"}),e.jsx(c,{size:"sm",variant:"secondary",className:"bg-gray-100 hover:bg-gray-200 text-gray-800",onClick:()=>(e=>{H(e),$(!0)})(t),children:"Details"})]})]})]})},t._id)}),0===q.length&&e.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[e.jsx(ve,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),e.jsx("p",{className:"text-lg text-gray-600 font-medium",children:"day"===u?"No appointments scheduled for this day.":"No appointments found with current filters."}),("Patient"===a?.role||"Receptionist"===a?.role||"Admin"===a?.role)&&e.jsxs(h,{open:R,onOpenChange:U,children:[e.jsx(L,{asChild:!0,children:e.jsxs(c,{className:"mt-6 bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),"Book Appointment"]})}),e.jsxs(x,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(v,{children:[e.jsx(y,{children:"Book Appointment"}),e.jsx(b,{children:"Fill out details to confirm booking."})]}),e.jsx(De,{onSuccess:async()=>{U(!1);const e=await k();I(e.data||[])},onCancel:()=>U(!1)})]})]})]})]})})]})})]}),Y&&e.jsx(Jt,{appointment:Y,open:V,onClose:()=>{$(!1),H(null)},onUpdate:async()=>{try{const e=await k();I(e.data||[])}catch(e){m.error("Failed to refresh appointments")}},userRole:a?.role||"Patient"})]})}},Symbol.toStringTag,{value:"Module"}));export{De as A,_e as T,Qt as a};
