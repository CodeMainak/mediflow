import{j as e}from"./vendor-ui-U3Ba6Q2R.js";import{a as s}from"./vendor-react-BE6zuAE5.js";import{p as a,B as l,C as r,r as t,s as n,w as i,v as c,L as d,I as o,S as m,a as h,b as x,d as p,e as j,O as g,t as u}from"./dashboard-DtoPNkNb.js";import{L as v,a0 as N,C as y,U as f,P as b,b as w,v as C,D as S,a1 as F,a as B}from"./vendor-icons-MnWTdEGO.js";import"./appointments-Dg7vZs4t.js";import"./vendor-utils-DkKPvr0p.js";const O=()=>{const{user:O,updateUser:P}=a(),[G,E]=s.useState(!1),[A,D]=s.useState(""),[L,Y]=s.useState(!1),[k,I]=s.useState(!1),[M,R]=s.useState({name:"",phone:"",address:"",dateOfBirth:"",gender:"",bloodGroup:"",allergies:[],emergencyContact:{name:"",relationship:"",phone:""}});s.useEffect(()=>{O&&(R({name:O.name||"",phone:O.phone||"",address:O.address||"",dateOfBirth:O.dateOfBirth?new Date(O.dateOfBirth).toISOString().split("T")[0]:"",gender:O.gender||"",bloodGroup:O.bloodGroup||"",allergies:O.allergies||[],emergencyContact:O.emergencyContact||{name:"",relationship:"",phone:""}}),D(O.allergies?.join(", ")||""))},[O]),s.useEffect(()=>{const e=()=>{Y(window.scrollY>300)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const U=e=>{const{name:s,value:a}=e.target;R(e=>({...e,[s]:a})),I(!0)},V=e=>{const{name:s,value:a}=e.target;R(e=>({...e,emergencyContact:{...e.emergencyContact,[s]:a}})),I(!0)},q=async e=>{e&&e.preventDefault(),E(!0);try{const e=await g(M);u.success("Profile updated successfully!"),P&&e.data.user&&P(e.data.user),I(!1)}catch(s){u.error(s.response?.data?.msg||"Failed to update profile")}finally{E(!1)}};return O?e.jsxs("div",{className:"space-y-6 p-4 md:p-8",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your personal information and health profile"})]}),e.jsx(l,{onClick:()=>q(),disabled:G||!k,className:"bg-emerald-600 hover:bg-emerald-700 text-white px-6 hidden md:flex",children:G?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})]}),k&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 flex items-center space-x-3",children:[e.jsx(y,{className:"h-5 w-5 text-amber-600 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-amber-800",children:"You have unsaved changes. Don't forget to save your profile updates."})]}),e.jsxs("form",{onSubmit:q,className:"space-y-6",children:[e.jsxs(r,{children:[e.jsxs(t,{children:[e.jsxs(n,{className:"flex items-center pt-4",children:[e.jsx(f,{className:"h-5 w-5 mr-2 text-emerald-600"}),"Basic Information"]}),e.jsx(i,{children:"Your personal details and contact information"})]}),e.jsx(c,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Full Name *"}),e.jsx(o,{id:"name",name:"name",value:M.name,onChange:U,placeholder:"Enter your full name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"phone",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),e.jsx(o,{id:"phone",name:"phone",type:"tel",value:M.phone,onChange:U,placeholder:"+1-555-0123",className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"dateOfBirth",children:"Date of Birth"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),e.jsx(o,{id:"dateOfBirth",name:"dateOfBirth",type:"date",value:M.dateOfBirth,onChange:U,className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"gender",children:"Gender"}),e.jsxs(m,{value:M.gender,onValueChange:e=>{R(s=>({...s,gender:e})),I(!0)},children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Select gender"})}),e.jsxs(p,{children:[e.jsx(j,{value:"Male",children:"Male"}),e.jsx(j,{value:"Female",children:"Female"}),e.jsx(j,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(d,{htmlFor:"address",children:"Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),e.jsx(o,{id:"address",name:"address",value:M.address,onChange:U,placeholder:"Enter your address",className:"pl-10"})]})]})]})})]}),e.jsxs(r,{children:[e.jsxs(t,{children:[e.jsxs(n,{className:"flex items-center mt-4",children:[e.jsx(S,{className:"h-5 w-5 mr-2 text-red-600"}),"Health Profile"]}),e.jsx(i,{children:"Critical medical information for emergency situations"})]}),e.jsx(c,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"bloodGroup",children:"Blood Group"}),e.jsxs(m,{value:M.bloodGroup,onValueChange:e=>{R(s=>({...s,bloodGroup:e})),I(!0)},children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Select blood group"})}),e.jsx(p,{children:["A+","A-","B+","B-","AB+","AB-","O+","O-"].map(s=>e.jsx(j,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"allergies",children:"Known Allergies"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-amber-500 pointer-events-none"}),e.jsx(o,{id:"allergies",value:A,onChange:e=>{const s=e.target.value;D(s);const a=s.split(",").map(e=>e.trim()).filter(e=>e);R(e=>({...e,allergies:a})),I(!0)},placeholder:"Penicillin, Shellfish, etc. (comma separated)",className:"pl-10"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Separate multiple allergies with commas"})]})]})})]}),e.jsxs(r,{children:[e.jsxs(t,{children:[e.jsxs(n,{className:"flex items-center pt-4",children:[e.jsx(F,{className:"h-5 w-5 mr-2 text-green-600"}),"Emergency Contact"]}),e.jsx(i,{children:"Person to contact in case of emergency"})]}),e.jsx(c,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"emergencyContactName",children:"Contact Name"}),e.jsx(o,{id:"emergencyContactName",name:"name",value:M.emergencyContact.name,onChange:V,placeholder:"John Doe"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"emergencyContactRelationship",children:"Relationship"}),e.jsx(o,{id:"emergencyContactRelationship",name:"relationship",value:M.emergencyContact.relationship,onChange:V,placeholder:"Spouse, Parent, etc."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"emergencyContactPhone",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),e.jsx(o,{id:"emergencyContactPhone",name:"phone",type:"tel",value:M.emergencyContact.phone,onChange:V,placeholder:"+1-555-0203",className:"pl-10"})]})]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(l,{type:"submit",variant:"outline",disabled:G,className:"bg-emerald-600 hover:bg-emerald-700 text-gray-300 px-8",children:G?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"h-4 w-4 mr-2 text-gray-300"}),"Save Changes"]})})})]}),L&&k&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50 animate-in slide-in-from-bottom duration-300",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"h-5 w-5 text-amber-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"You have unsaved changes"})]}),e.jsx(l,{onClick:()=>q(),disabled:G,className:"bg-emerald-600 hover:bg-emerald-700 text-white px-6 shadow-lg",children:G?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})]})})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(v,{className:"h-8 w-8 animate-spin text-emerald-600"})})};export{O as ProfileSettings};
